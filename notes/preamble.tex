\usepackage[square]{natbib}

% For normal writing
\usepackage{csquotes}                         % nice quotes
\usepackage{parskip}                          % handling paragraph space
\usepackage{microtype}                        % for better spacing
\usepackage[english]{babel}                   % for British spelling
\usepackage{enumitem}                         % Better handling of itemize
\usepackage[a4paper]{geometry}                % We like this paper size
\usepackage{hyphenat}                         % Better hyphenation
\usepackage[symbol]{footmisc}                 % Handling footnotes
\usepackage{setspace}                         % Control space sizes
\usepackage{soul}                             % Letter spacing

% Mathematics and graphics
\usepackage{amsfonts,amsmath,amssymb}         % Math fonts and helpers
\usepackage{graphicx}                         % For image and graphics
\usepackage{tikz}                             % Tikz!!!!
\usepackage{xcolor}                           % Using name colors

% Caption and handling
\usepackage{caption}                          % For caption handling
\usepackage{subcaption}                       % Better subfigures

\usepackage[default]{sourcesanspro}           % I prefer this font

% tables and sourcecode
\usepackage{booktabs}                         % For tables
\usepackage{stackengine}                      % To stack tables and figures
\usepackage{verbatimbox}                      % For a box around verbantim

% source code
\usepackage[newfloat]{minted}                 % Source code highlighting
\usepackage{listings}                         % Source code as listing
\usepackage{floatrow}                         % For better captioning setup

\usepackage{subfiles}                         % Separate files in subfiles

%% Tikz libraries
\usetikzlibrary{positioning,calc}

% Caption handling
\DeclareCaptionFormat{listingformat}{%
  \colorbox[HTML]{C9EBDD}{\parbox{\dimexpr\textwidth-2\fboxsep-2\fboxrule\relax}{#1#2\ttfamily#3}}
}
\captionsetup[listing]{
  format=listingformat,
  position=top,
  skip=-5pt,
  font=small,
  labelfont=bf,
  justification=raggedright,
  singlelinecheck=false}
\SetupFloatingEnvironment{listing}{name=Source code,placement=htp}

\floatsetup[listing]{style=Plaintop}

\captionsetup[figure]{labelfont=bf, labelsep=period}
\renewcommand{\familydefault}{\sfdefault}
\onehalfspacing

% For minted style
\setmonofont[Contextuals={Alternate},Scale=0.8]{iosevka-ss05-medium.ttf}
\appto\verbatim{\singlespacing}

\AtBeginEnvironment{minted}{\singlespacing}

% math shortcuts
\providecommand{\lxor}{\oplus}
\providecommand{\then}{\to}
\providecommand{\compl}{\overline}

%% Custom commands

% For url footnotes
\newcommand\fnurl[2]{\href{#2}{#1}\footnote{\url{#2}}}
%\newcolumntype{P}[1]{>{\centering\arraybackslash}p{#1}}

\renewcommand{\arraystretch}{1.2}
\newcommand{\rulesep}{\smallskip \hrule \smallskip}
\newcommand{\code}[1]{\texttt{#1}}